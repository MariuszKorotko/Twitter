{% extends 'twitter/base.html' %}

{% block title %} Messages {% endblock %}

{% block content %}
<div>
    <h4>Unread message:</h4>
        <table>
        {% for message in received_messages %}
            {% if message.read_off is False %}
        <tr>
            <td><th>From:</th>
            </td>
            <td>
                <a href="{% url 'twitter:user_details' message.sender.id %}">
                {{ message.sender.get_username }}</a>
            </td>
            <td><th>Date:</th></td>
            <td>
            {{ message.creation_date }}
            </td>
            <td><th>Contents:</th>
            </td>
            <td>
                {{ message.contents|slice:":30" }}
            </td>
            <td>
                <a href="{% url 'twitter:message_details' message.id %}">Read</a>
            </td>
        </tr>
        </table>
    {% else %}
    <h4>Received messages:</h4>
    <table>
        <tr>
            <td><th>From:</th>
            </td>
            <td>
                <a href="{% url 'twitter:user_details' message.sender.id %}">
                {{ message.sender.get_username }}</a>
            </td>
            <td><th>Date:</th></td>
            <td>
            {{ message.creation_date }}
            </td>
            <td><th>Contents:</th>
            </td>
            <td>
                {{ message.contents|slice:":30" }}
            </td>
            <td>
                <a href="{% url 'twitter:message_details' message.id %}">Read</a>
            </td>
        </tr>
        {% endif %}
        {% endfor %}
    </table>

</div>

<div>
    <h4>Sent messages:</h4>
    <table>
        {% for message in sent_messages %}
        <tr>
            <td><th>To:</th></td>
            <td>
                <a href="{% url 'twitter:user_details' message.receiver.id %}">
                {{ message.receiver.get_username }}</a>
            </td>
            <td><th>Date:</th></td>
            <td>
                {{ message.creation_date }}
            </td>
            <td><th>Contents:</th></td>
            <td>
                {{ message.contents|slice:":30" }}
            </td>
            <td>
                <a href="{% url 'twitter:message_details' message.id %}">Read</a>
            </td>
        </tr>
        {% endfor %}
    </table>
</div>

{% endblock %}